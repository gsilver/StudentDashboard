<div id="todo"  ng-controller="todoController" class="itemPanel" style="margin-top:20px">
  <div class="container-fluid" style="padding:0">
    <div class="row">
      <div class=" col-lg-6 col-md-6 col-xs-6">
        <h3 class="colHeader pull-left" style="padding:0;margin:0">To Do {{showWhen | titleCase}}</h3>
      <!--
        <label class="sr-only" for="todoTimeSelector">Due</label>
        <select id="todoTimeSelector" class="form-control input-sm pull-left" style="margin-left:1em" ng-model="showWhen" ng-options="item.value as item.name for item in todo_time_options">
        </select>
      -->
      </div>
      <div class="col-lg-6 col-md-6 col-xs-6" style="text-align:right;padding-right:0">
        <div class="btn-group btn-group-sm">
          <div class="dropdown btn-group">
            <button class="btn btn-sm btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
              Show
              <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
              <li ng-repeat="item in
          todo_time_options" role="presentation"><a ng-click="setWhen(item.value)"role="menuitem" tabindex="-1" href="#">{{item.name}}</a></li>
            </ul>
          </div>

          <button type="button" id="removeToDos" class="btn btn-sm btn-primary" style="display:none" ng-click="removeToDos()" >
            - <span class="sr-only">Delete selected to dos</span>
          </button>
          
          <button type="button" type="button" id="addToDo" class="btn btn-sm btn-default"  title=
          "Add new Google Task" ng-click="showTask=!showTask">
            <span ng-show="!showTask"> + </span><span ng-show="showTask"> &times; </span><span class="sr-only">Add a new to do</span>
          </button>
        </div>  
        <!--
        <button type="button" id="addToDo" class="btn btn-sm btn-default" data-toggle="modal" data-target="#newToDoModal" title=
        "Add new Google Task">
          + <span class="sr-only">Add a new to do</span>
        </button>
        -->
      </div>
    </div>
    <div class="row" ng-show="showTask">
      <div class=" col-lg-12 col-md-12 col-xs-12 input-group"  style="padding:0" >
        <input id="quickAddTask" ng-enter="newTaskSubmitOnEnter()" type="text" class="form-control" placeholder="Add task + Enter. Or use button on right.">
        <span class="input-group-btn">
          <button class="btn btn-default" type="button"  data-toggle="modal" data-target="#newToDoModal" title="Add Google Task with details.">></button>
        </span>
      </div>
  </div>  
  <div class="row">
    <div class=" col-lg-12 col-md-12 col-xs-12"  style="padding:0">
      <div id="quickAddTaskMessage" class="label label-info-custom" style="display:none">Google Task added. Use menu above to see and edit.</div>
    </div>
  </div>
  <ul class="itemList">
    <li ng-repeat="item in todos | orderBy:'due_date_sort' | filter:showWhen" class="container-fluid" ng-class="isOverdue(item)" >
      <div class="overdueFlag">
        <i class="glyphicon glyphicon-fire"></i>
      </div>
      <div class="row">
        <div class="col-lg-1 col-md-1 col-xs-1 {{item.contextLMS}} iconContainer">
          <span ng-if="item.origin ==='gt'"><input type="checkbox"  ng-model="item.checked" /></span>
        </div>
        <div class="col-lg-7 col-md-7 col-xs-7">
          <a ng-if="item.origin !=='gt'" target="_blank" href="{{item.link}}" class="assigLink{{item.contextLMS}}">{{item.title  | cut:true:30:'...'}} <span class="sr-only"> (opens in a new page)</span></a>
          <span ng-if="item.origin ==='gt'">{{item.title}}</span>
          <br>
          <small>
              <span ng-if="item.origin !=='gt'"><a class="courseLink" data-target="{{item.contextLMS}}" target="_blank" href="{{item.contextUrl}}"><span class="sr-only">View {{item.title}} in course site</span><span aria-hidden="true">Go to course site</span></a></span>
              <span ng-if="item.origin ==='gt'">
                   {{item.message | cut:true:35:'...'}}
              </span>
              <span class="noDueDate" ng-if="item.due ===''"></span>
              <span class="dueDate" ng-if="item.due !==''"></span>
            </small>
        </div>
        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 date">
          <small class="dateSpan">
            <span  ng-show="item.due_date_sort">{{item.due_date_sort | dateUntil}}</span>
            <div ng-show="item.origin ==='gt'">
              <a href="" ng-click="editTodo(item)"  data-toggle="modal" data-target="#editToDoModal">Edit</a>
            <div>
          </small>        
        </div>
      </div>
    </li>
  </ul>
<div class="modal fade" id="newToDoModal" tabindex="-1" role="dialog" aria-labelledby="newToDoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                  <span aria-hidden="true">&times;</span>
                  <span class="sr-only">Close</span>
              </button>
              <h3 class="modal-title" id="newToDoModalLabel">New Google Task <small>(will be listed here and in Google Tasks)</h3>
          </div>
          <div class="modal-body">
              <div class="form-group form-inline">
                  <label for="toDoTitle" class="sr-only">
                      Email address
                  </label>
                  <input type="text" class="form-control" id="toDoTitle" placeholder="To do title">
                  
                  <input id="newToDoDate" class="form-control" type="date" placeholder="mm/dd/yyyy">
                  <input id="newToDoTime" class="form-control" type="time" placeholder="hh/mm/am|pm">
              </div>
              <div class="form-group">
                  <label for="toDoMessage" class="sr-only">
                      Stuff...
                  </label>
                  <textarea class="form-control" id="toDoMessage" placeholder="Stuff to do...." style="height:200px"></textarea>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">
                  Close
              </button>
              <button type="button" class="btn btn-primary" ng-click="newToDo()"  data-dismiss="modal">
                  Save To Do
              </button>
          </div>
      </div>
  </div>
</div>

<div class="modal fade" id="editToDoModal" tabindex="-1" role="dialog" aria-labelledby="editToDoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">
                  <span aria-hidden="true">&times;</span>
                  <span class="sr-only">Close</span>
              </button>
              <h3 class="modal-title" id="editToDoModalLabel">Edit Google Task <small>(will be listed here and in Google Tasks)</h3>
          </div>
          <div class="modal-body">
              <div class="form-group form-inline">
                  <label for="editToDoTitle" class="sr-only">
                      Email address
                  </label>
                  <input type="text" class="form-control" id="editToDoTitle" placeholder="To do title">
                  
                  <input id="editToDoDate" class="form-control" type="date" placeholder="mm/dd/yyyy">
                  <input id="editToDoTime" class="form-control" type="time" placeholder="hh/mm/am|pm">
              </div>
              <div class="form-group">
                  <label for="toDoMessage" class="sr-only">
                      Stuff...
                  </label>
                  <textarea class="form-control" id="editToDoMessage" placeholder="Stuff to do...." style="height:200px"></textarea>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">
                  Close
              </button>
              <button type="button" class="btn btn-primary" ng-click="editToDoSave()"  id="editToDoSave" data-index="" data-dismiss="modal">
                  Save To Do
              </button>
          </div>
      </div>
  </div>
</div>


</div>